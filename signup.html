<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./favicon-32x32.png" />
    <link rel="stylesheet" href="styles.css" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function redirect() {
        window.location.href = 'index.html';
      }
    </script>
    <div class="container">
      <br /><br />
      <form>
        <input
          class="user"
          type="text"
          id="name"
          required
          placeholder="enter your user name"
        /><br /><br />
        <input
          class="pass"
          type="password"
          id="password"
          required
          placeholder="enter your password"
        /><br /><br />
        <input
          class="pass"
          type="password"
          id="repassword"
          required
          placeholder="retype password"
        /><br /><br />
        <button type="button" onclick="validate()">continue</button>
      </form>
    </div>
    <script>
      const users = [];
      function validate() {
        const username = document.getElementById('name').value;
        const Password = document.getElementById('password').value;
        const repassword = document.getElementById('repassword').value;
        let newusers = { username, Password };
        if (username == '' || Password == '') {
          window.alert('enter valid credentials');
        } else {
          if (Password !== repassword) {
            window.alert("password doesn't match with retyped password");
          } else {
            if (window.localStorage.getItem('user') !== null) {
              const user = JSON.parse(window.localStorage.getItem('user'));
              console.log(user);
              user.push(newusers);
              window.localStorage.setItem('user', JSON.stringify(user));
              redirect();
            } else {
              users.push(newusers);
              window.localStorage.setItem('user', JSON.stringify(users));
              redirect();
            }
          }
        }
      }
    </script>
  </body>
</html>
